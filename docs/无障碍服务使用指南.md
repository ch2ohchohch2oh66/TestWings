# 无障碍服务使用指南

## 一、什么是无障碍服务？

无障碍服务（AccessibilityService）是 Android 系统提供的一种特殊服务，允许应用：
- 获取屏幕上的 UI 元素信息
- 执行点击、输入、滑动等操作
- 监听 UI 变化事件

**TestWings 需要无障碍服务权限来执行自动化测试操作。**

---

## 二、如何开启无障碍服务？

### 方法 1：通过应用内按钮（推荐）

1. 打开 TestWings 应用
2. 如果看到"无障碍服务状态：❌ 未启用"
3. 点击"前往设置开启"按钮
4. 系统会自动跳转到无障碍设置页面

### 方法 2：手动开启

1. 打开手机**设置**
2. 找到**辅助功能**（或**无障碍**）
3. 在服务列表中找到**TestWings**
4. 点击进入，开启开关

**注意**：不同手机品牌的设置路径可能略有不同：
- **华为/荣耀**：设置 → 辅助功能 → TestWings
- **小米**：设置 → 更多设置 → 无障碍 → TestWings
- **OPPO/一加**：设置 → 其他设置 → 无障碍 → TestWings
- **vivo**：设置 → 更多设置 → 无障碍 → TestWings

---

## 三、验证服务是否启用

开启后，返回 TestWings 应用：
- 如果看到"无障碍服务状态：✅ 已启用"，说明服务已成功启用
- 此时可以使用所有操作测试功能

---

## 四、功能说明

### 4.1 屏幕捕获
- **功能**：捕获当前屏幕并保存为图片
- **权限**：需要屏幕捕获权限（首次使用时会自动请求）

### 4.2 操作测试（需要无障碍服务）

#### 点击操作
- **点击(500,500)**：在屏幕坐标 (500, 500) 位置执行点击
- **返回键**：模拟按下返回键

#### 滑动操作
- **向上滑动**：从屏幕中间向上滑动
- **向下滑动**：从屏幕中间向下滑动
- **向左滑动**：从屏幕中间向左滑动
- **向右滑动**：从屏幕中间向右滑动

---

## 五、常见问题

### Q1: 为什么点击"前往设置开启"没有反应？

**A:** 可能是系统限制，请手动前往设置开启：
1. 打开手机设置
2. 搜索"无障碍"或"辅助功能"
3. 找到 TestWings 并开启

### Q2: 开启后仍然显示"未启用"？

**A:** 请检查：
1. 确保在设置中已开启 TestWings 无障碍服务
2. 返回应用，等待 1-2 秒让系统更新状态
3. 如果仍然不行，尝试重启应用

### Q3: 操作测试按钮点击后没有反应？

**A:** 请检查：
1. 无障碍服务是否已启用（显示 ✅ 已启用）
2. 目标应用是否在前台（操作会作用于当前显示的应用）
3. 查看 Logcat 日志，检查是否有错误信息

### Q4: 滑动操作需要 Android 版本要求？

**A:** 是的，滑动操作需要 **Android 7.0 (API 24) 或更高版本**。您的设备（HarmonyOS 4.2，对应 Android 12）完全支持。

---

## 六、安全说明

**无障碍服务权限非常敏感**，系统会：
- 在设置中明确显示哪些应用拥有此权限
- 在状态栏显示无障碍服务图标（部分系统）
- 允许用户随时关闭

**TestWings 承诺**：
- ✅ 仅在本地使用，不上传任何数据
- ✅ 仅用于自动化测试，不用于其他目的
- ✅ 用户可以随时关闭服务

---

## 七、下一步

开启无障碍服务后，您可以：
1. 测试各种操作功能
2. 开始开发 OCR 文字识别功能
3. 实现测试用例执行功能

**祝您使用愉快！** 🎉

